import{_ as s,c as a,o as n,a as l}from"./app.ad5e6bd3.js";const D=JSON.parse('{"title":"配置SSH免密登录服务器","description":"","frontmatter":{"title":"配置SSH免密登录服务器","date":"2022-02-12T00:00:00.000Z","tags":["技术笔记","技术教程"],"categories":["技术笔记"]},"headers":[{"level":2,"title":"取得本地公钥","slug":"取得本地公钥","link":"#取得本地公钥","children":[]},{"level":2,"title":"服务器添加信任","slug":"服务器添加信任","link":"#服务器添加信任","children":[{"level":3,"title":"上传公钥","slug":"上传公钥","link":"#上传公钥","children":[]},{"level":3,"title":"添加信任","slug":"添加信任","link":"#添加信任","children":[]}]},{"level":2,"title":"重启ssh","slug":"重启ssh","link":"#重启ssh","children":[]},{"level":2,"title":"免密登录root","slug":"免密登录root","link":"#免密登录root","children":[]}],"relativePath":"pages/technology/learn/ssh-no-pwd-login.md","lastUpdated":1679313190000}'),e={name:"pages/technology/learn/ssh-no-pwd-login.md"},o=l(`<h1 id="本地配置ssh免密远程登录服务器" tabindex="-1">本地配置SSH免密远程登录服务器 <a class="header-anchor" href="#本地配置ssh免密远程登录服务器" aria-hidden="true">#</a></h1><p>最近服务器从阿里云换到了腾讯云，需要把服务进行一次整体的迁移</p><p>为了方便资源的部署，需要配置一下SSH的免密登录，避免频繁的输入密码</p><h2 id="取得本地公钥" tabindex="-1">取得本地公钥 <a class="header-anchor" href="#取得本地公钥" aria-hidden="true">#</a></h2><p>先查看本地是否存在<code>id_rsa.pub</code>文件</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">ls</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.ssh</span></span>
<span class="line"></span></code></pre></div><p>不存在可以通过如下指令创建（一路回车即可）</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">ssh-keygen</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-t</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rsa</span></span>
<span class="line"></span></code></pre></div><h2 id="服务器添加信任" tabindex="-1">服务器添加信任 <a class="header-anchor" href="#服务器添加信任" aria-hidden="true">#</a></h2><h3 id="上传公钥" tabindex="-1">上传公钥 <a class="header-anchor" href="#上传公钥" aria-hidden="true">#</a></h3><p>将本地公钥上传到远程服务器</p><ul><li>其中 <code>$host</code>换成目标服务器绑定的 <strong>域名</strong> 或 <strong>IP</strong> 即可</li></ul><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.ssh/id_rsa.pub</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root@</span><span style="color:#A6ACCD;">$host</span><span style="color:#C3E88D;">:~/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 如</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.ssh/id_rsa.pub</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root@baidu.com:~/</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.ssh/id_rsa.pub</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root@39.156.66.18:~/</span></span>
<span class="line"></span></code></pre></div><h3 id="添加信任" tabindex="-1">添加信任 <a class="header-anchor" href="#添加信任" aria-hidden="true">#</a></h3><p>先检查服务器上是<code>root</code>用户是否存在<code>.ssh</code>目录</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p22</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root@</span><span style="color:#A6ACCD;">$host </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ls -al</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>不存在则运行上述一样的方式进行创建</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p22</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root@</span><span style="color:#A6ACCD;">$host </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ssh-keygen -t rsa</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>添加信任</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p22</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root@</span><span style="color:#A6ACCD;">$host </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cat ~/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><h2 id="重启ssh" tabindex="-1">重启ssh <a class="header-anchor" href="#重启ssh" aria-hidden="true">#</a></h2><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p22</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root@</span><span style="color:#A6ACCD;">$host </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">service sshd restart</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><h2 id="免密登录root" tabindex="-1">免密登录root <a class="header-anchor" href="#免密登录root" aria-hidden="true">#</a></h2><p>配置完成后即可进行免密登录</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root@</span><span style="color:#A6ACCD;">$host</span></span>
<span class="line"></span></code></pre></div>`,25),p=[o];function t(c,r,i,h,d,C){return n(),a("div",null,p)}const u=s(e,[["render",t]]);export{D as __pageData,u as default};
